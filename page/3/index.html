<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>lightSky'Blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">lightSky'Blog</h1><a id="logo" href="/.">lightSky'Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h2 class="post-title"><a href="/2015/06/13/google-for-android-9-tools/">Google Developing for Android 九 － Tools</a></h2><div class="post-meta">2015-06-13</div><a data-thread-key="2015/06/13/google-for-android-9-tools/" href="/2015/06/13/google-for-android-9-tools/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文<a href="https://medium.com/google-developers/developing-for-android-ix-tools-375134af1098">Developing for Android IX Tools</a>  </p>
<p>本篇文章为Google Developing for Android 系列的最后一篇文章,文章结尾如是说：  </p>
<blockquote>
<p>Fin<br>(The End)<br>(Last Chapter. Done. No more. Finished.)</p>
</blockquote>
<h2 id=""><a href="#" class="headerlink" title=" "></a> </h2><p>Andorid提供了很多可以帮助我们debug和分析问题的工具，它们可以让你的app拥有更好的性能。这些检测工具涵盖了内存分析，比如Allocation Tracker(在DDMS和Android Studio中都有)和设备性能。</p>
<p>知道这些工具很重要，但更重要的是要真正的使用这些工具，保证你的应用拥有期望的表现（60帧限制，避免垃圾回收器搅动）。通过尽可能的优化和提高整体体验可以帮助Android更好的整体平台性。</p>
<p>通常用于分析性能的工具有两种类型：host和on-device。Host工具是那些运行在计算机上的工具（命令行，DDMS，Android Studio等）。on-device工具是设备上的一些工具（比如开发者选项下的一些工具），可以展示一些时时的信息，通常涉及到性能的评测。</p></div><p class="readmore"><a href="/2015/06/13/google-for-android-9-tools/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/13/google-for-android-8-user-interface/">Google Developing for Android 八 － User Interface</a></h2><div class="post-meta">2015-06-13</div><a data-thread-key="2015/06/13/google-for-android-8-user-interface/" href="/2015/06/13/google-for-android-8-user-interface/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文 <a href="https://medium.com/google-developers/developing-for-android-viii-e91ced595fac">Developing for Android VIII The Rules: User Interface</a></p>
<h2 id="避免过度绘制"><a href="#避免过度绘制" class="headerlink" title="避免过度绘制"></a>避免过度绘制</h2><p>正如在第一篇Context介绍种关于GPU讨论的部分所说，很多手机的性能有限，如果应用中有严重的过度绘制可能会导致比较糟糕的渲染性能。不透明的View会完全遮盖其它的View的情况下会导致渲染引擎进行多次绘制。你可以通过开启设置中的开发者选项的GPU overdraw来修复相应的问题。</p>
<h2 id="避免无用的背景"><a href="#避免无用的背景" class="headerlink" title="避免无用的背景"></a>避免无用的背景</h2><p>避免过度绘制的一种方式是：移除已经拥有非透明背景View的背景。适用于View的背景不透明而且完全遮住了window背景的情况。  </p></div><p class="readmore"><a href="/2015/06/13/google-for-android-8-user-interface/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-7-framework/">Google Developing for Android 七 － Framework最佳实践</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-7-framework/" href="/2015/06/07/google-for-android-7-framework/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文 <a href="https://medium.com/google-developers/developing-for-android-vii-the-rules-framework-concerns-d0210e52eee3">Developing for Android VII The Rules: Framework</a></p>
<h2 id="避免选择应用组件搭建架构"><a href="#避免选择应用组件搭建架构" class="headerlink" title="避免选择应用组件搭建架构"></a>避免选择应用组件搭建架构</h2><p>应用组件（activities, services, providers, receivers)是你与操作系统交互的接口但是不要将它们看作是搭建整个应用架构的基础工具。每一个组件在系统中有自己特定语境，通常也只应该有需要的时候才使用：</p></div><p class="readmore"><a href="/2015/06/07/google-for-android-7-framework/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-6-storage/">Google Developing for Android 六 － Storage最佳实践</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-6-storage/" href="/2015/06/07/google-for-android-6-storage/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文 <a href="https://medium.com/google-developers/developing-for-android-vi-c0b1539f0e98">Developing for Android VI The Rules: Storage</a></p>
<h2 id="避免文件路径的硬编码"><a href="#避免文件路径的硬编码" class="headerlink" title="避免文件路径的硬编码"></a>避免文件路径的硬编码</h2><p>尽量从上context或者Environment中获取</p>
<ul>
<li><p>不要硬编码全局的路径”/sdcard”，使用Environment.getExternalStorageDirectory() 或者相关的方法替代  </p>
</li>
<li><p>不要硬编码应用路径： “/data/data/myapp/databases”, 使用 Context.getDatabasePath(), Context.getFilesDir()或者相关的方法替代</p>
</li>
</ul></div><p class="readmore"><a href="/2015/06/07/google-for-android-6-storage/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-5-language-libraries/">Google Developing for Android 五 － Language and Libraries</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-5-language-libraries/" href="/2015/06/07/google-for-android-5-language-libraries/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文 <a href="https://medium.com/google-developers/developing-for-android-v-f6b8038b42f5">Developing for Android V:The Rules: Language and Libraries</a></p>
<h2 id="使用Android自身适当的数据结构"><a href="#使用Android自身适当的数据结构" class="headerlink" title="使用Android自身适当的数据结构"></a>使用Android自身适当的数据结构</h2><p>出于对内存分配的考虑，传统的集合类在Android上可能不是最优选。Android特地提供的一些集合类型在很多情况下更合适，比如ArrayMap（好过HashMap），SparseArray。当集合非常大的时候，那些一般的集合仍然是合适的。而较小的集合则受益于自动装箱和内存分配的减少。</p></div><p class="readmore"><a href="/2015/06/07/google-for-android-5-language-libraries/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-4-network/">Google Developing for Android 四 － Network最佳实践</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-4-network/" href="/2015/06/07/google-for-android-4-network/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文 <a href="https://medium.com/google-developers/developing-for-android-iv-e7dc4ce0a59">Developing for Android, IV:The Rules: Networking</a></p>
<h2 id="不要过度同步"><a href="#不要过度同步" class="headerlink" title="不要过度同步"></a>不要过度同步</h2><p>向云端发送数据和获取数据是非常耗电的行为之一。不是网络传输会将设备搞挂，而是一定量的后台应用向服务发起的这些请求会导致设备不能进入睡眠状态（或者对于收音机的低电量模式），一定时间后会导致严重的电量的流失。如果你不需要立即获取数据，就不要获取。如果将来需要获取数据，那么可以使用<code>JobScheduler</code>或者<code>GCM Network Manager</code>将它们和一些系统的请求一起处理。<br>下面是一些避免过度请求的一些建议：</p>
<ul>
<li><p>使用 GoogleCloudMessaging（GCM）。而不是使用新的持久化连接。  </p>
</li>
<li><p>使用JobScheduler（API 21以及之后）或者GCM NetrowManager将一些异步请求绑在一起进行批处理，这些API可以保证操作只在设备恰当的闲暇状态下进行</p>
</li>
<li><p>不要轮询，任何情况都不要</p>
</li>
<li><p>只同步你需要的数据。数据同步已经被认为是电池和总体系统健康的罪魁祸首之一。因此开发者需要谨慎的选择哪些是真正需要同步的数据，以及多久同步一次,这些都可以让用户有更好的体验。</p>
</li>
</ul>
<ul>
<li>这里有一些参考文章可以查看更多信息:<a href="http://developer.android.com/training/efficient-downloads/regular_updates.html">Minimizing the Effect of Regular Updates</a>,<a href="http://developer.android.com/training/sync-adapters/index.html">Transferring Data Using Sync Adapters</a>,<a href="http://developer.android.com/training/efficient-downloads/efficient-network-access.html">Optimizing Downloads for Efficient Network Access</a></li>
</ul></div><p class="readmore"><a href="/2015/06/07/google-for-android-4-network/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-3-performance/">Google Developing for Android 三 － Performance最佳实践</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-3-performance/" href="/2015/06/07/google-for-android-3-performance/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文 <a href="https://medium.com/google-developers/developing-for-android-iii-2efc140167fd">Developing for Android, III:The Rules: Performance</a></p>
<p>在Android中，性能和内存的关系很密切，因为系统的整体内存大小会影响所有进程的性能，因为垃圾回收器会对运行期间的性能产生很大的影响。下面的重点是运行期间的性能问题而不是内存。</p>
<h2 id="避免在动画和交互期间繁重的操作"><a href="#避免在动画和交互期间繁重的操作" class="headerlink" title="避免在动画和交互期间繁重的操作"></a>避免在动画和交互期间繁重的操作</h2><p>正如在第一篇文章中提到过的，在UI Thread做繁重的操作会影响到渲染的处理。同样会导致动画的问题，因为它依赖于每一帧的渲染。这就意味着在动画期间避免在UI进行繁重的操作就更加重要。以下是一些可以避免的常见情况：</p></div><p class="readmore"><a href="/2015/06/07/google-for-android-3-performance/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-2-memory/">Google Developing for Android 二 － Memory 最佳实践</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-2-memory/" href="/2015/06/07/google-for-android-2-memory/#comments" class="ds-thread-count"></a><div class="post-content"><p>原文：<a href="https://medium.com/google-developers/developing-for-android-ii-bb9a51f8c8b9">Developing for Android, II<br>The Rules: Memory</a></p>
<p>在决定应用的行为，是否有好的用户体验以及整体的设备体验来说，内存的使用可能是独立因素中最重要的。内存因素包括应用的内存占用，以及内存搅动（导致的垃圾回收会对运行期间的性能有影响）。</p>
<h2 id="避免在循环中分配内存"><a href="#避免在循环中分配内存" class="headerlink" title="避免在循环中分配内存"></a>避免在循环中分配内存</h2><p>内存分配虽然不可避免，但是应尽可能的避免，特别是在平凡的调用的代码块中。比如在绘制代码中，因为每一帧的渲染都会执行该方法。</p>
<p>避免在自定义View的onDraw方法中分配内存，因为动画也许会调用它。使用缓存对象替换临时对象可以避免新的内存开销。典型的例子就是在onDraw方法中分配了一个新的Paint对象，因为Canvas需要一个Paint对象。对于这种自定义View的实例只分配一个独立的Paint对象而后在onDraw方法中临时使用更好。</p></div><p class="readmore"><a href="/2015/06/07/google-for-android-2-memory/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/06/07/google-for-android-1-mobile-context/">Google Developing for Android 一 － 相关上下文介绍</a></h2><div class="post-meta">2015-06-07</div><a data-thread-key="2015/06/07/google-for-android-1-mobile-context/" href="/2015/06/07/google-for-android-1-mobile-context/#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前几天在G+上看到Google Developers站点，有一个Android系列的文章，分享到个人微博，周末闲来没事就学写了下，把它们简单的翻译了下，没想到一发不可收拾，六篇文章全部都翻译完了，有些地方省略了部分示例的描述或者换了另一种表述，如果有理解的不准确的地方，还望指正</p>
<hr>
<p>原文：<a href="https://medium.com/google-developers/developing-for-android-i-understanding-the-mobile-context-fd2351b131f8">Developing for Android, I:Understanding the Mobile Context</a></p>
<h2 id="context或者这些建议为何如此重要"><a href="#context或者这些建议为何如此重要" class="headerlink" title="context或者这些建议为何如此重要"></a>context或者这些建议为何如此重要</h2><p>对于理解这些最佳实践的相关上下文是非常重要的。特别是明白移动端存在一些严重的限制，和台式机以及服务器端的计算是完全不同的。因此，在开发应用的时候，如果没有将这些限制考虑进去，将会导致很大的性能问题和内存消耗，这不是针对于某一个应用而言，而是针对整个设备，因为很多拥有相同性能问题的app共同导致了一个性能很差的设备。<br>以下使一些重要的约束，限制和现实，在过去以及将来的移动设备中都很重要。</p></div><p class="readmore"><a href="/2015/06/07/google-for-android-1-mobile-context/">Read More</a></p></div><div class="post"><h2 class="post-title"><a href="/2015/05/23/anim_basic_knowledge/">Android 动画基础</a></h2><div class="post-meta">2015-05-23</div><a data-thread-key="2015/05/23/anim_basic_knowledge/" href="/2015/05/23/anim_basic_knowledge/#comments" class="ds-thread-count"></a><div class="post-content"><blockquote>
<p>本文为 <a href="https://github.com/android-cn/android-open-project-analysis">Android 开源项目源码解析</a> 公共技术点中的 动画基础知识 部分,主要介绍了Andorid中的Anim动画和Property动画的基础知识，对于Property动画部分，之前有一篇文章详细介绍了整个Property的架构，源码分析，这里主要将其中的一些基础以及总结性知识进行整理和提炼，更详细的分析可以参考我的另一篇文章<a href="http://blog.csdn.net/xushuaic/article/details/40424379">Property Anim详解</a>。  </p>
</blockquote></div><p class="readmore"><a href="/2015/05/23/anim_basic_knowledge/">Read More</a></p></div><nav class="page-navigator"><a class="extend prev" rel="prev" href="/page/2/">Previous</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">Next</a></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.lightskystreet.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android动画/">Android动画</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/MaterialDesign/">MaterialDesign</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/优秀项目原理解析/">优秀项目原理解析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/性能优化/">性能优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/编译/">编译</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android最佳实践/">Android最佳实践</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/RN/">RN</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reactive/">Reactive</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rx/">Rx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Talk/">Talk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/MaterialDesign/" style="font-size: 15px;">MaterialDesign</a> <a href="/tags/Android，架构/" style="font-size: 15px;">Android，架构</a> <a href="/tags/Android，编译/" style="font-size: 15px;">Android，编译</a> <a href="/tags/Android，适配/" style="font-size: 15px;">Android，适配</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Anim/" style="font-size: 15px;">Anim</a> <a href="/tags/Android动画/" style="font-size: 15px;">Android动画</a> <a href="/tags/优秀项目原理解析/" style="font-size: 15px;">优秀项目原理解析</a> <a href="/tags/Android，最佳实践/" style="font-size: 15px;">Android，最佳实践</a> <a href="/tags/JS学习笔记/" style="font-size: 15px;">JS学习笔记</a> <a href="/tags/性能优化/" style="font-size: 15px;">性能优化</a> <a href="/tags/Android，性能优化/" style="font-size: 15px;">Android，性能优化</a> <a href="/tags/Android，原理解析/" style="font-size: 15px;">Android，原理解析</a> <a href="/tags/PropertyViewAnim/" style="font-size: 15px;">PropertyViewAnim</a> <a href="/tags/RN/" style="font-size: 15px;">RN</a> <a href="/tags/Rx/" style="font-size: 15px;">Rx</a> <a href="/tags/Reactive/" style="font-size: 15px;">Reactive</a> <a href="/tags/Rexactive/" style="font-size: 15px;">Rexactive</a> <a href="/tags/ViewPager/" style="font-size: 15px;">ViewPager</a> <a href="/tags/ViewAnim/" style="font-size: 15px;">ViewAnim</a> <a href="/tags/View绘制机制/" style="font-size: 15px;">View绘制机制</a> <a href="/tags/PropertyAnim，源码分析/" style="font-size: 15px;">PropertyAnim，源码分析</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/design-summary/">设计模式基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/11/android-dex-plugin/">multidex与插件化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/19/android-optimize-image-download-size/">Android性能优化-减小图片下载大小</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/18/android-optimize-thread/">Android性能优化-线程性能优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/android-optimize-apk/">Android性能优化-减小APK大小</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/android-optimize-memory/">Android性能优化-内存优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/android-optimize-background/">Android性能优化-App后台优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/android-optimize-start/">Android性能优化-App启动优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/16/js-str-arr/">JS学习-字符串和数组</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/js-inherit/">JS学习-封装和继承</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> Recent Comments</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">lightSky'Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'lightSky'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-57428802-1## Your Google Analytics tracking id, e.g. UA-42425684-2','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>